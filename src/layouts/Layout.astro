---
import '../styles/global.css';

interface Props {
  title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="Microsite Boilerplate" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="alternate icon" href="/favicon.ico" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
    <script is:inline>
      // Suppress browser extension errors (crypto wallet extensions like MetaMask)
      // These are harmless but can clutter the console in production
      // Must run immediately before extensions inject their scripts
      (function() {
        'use strict';
        
        // Suppress console errors from extensions
        if (typeof console !== 'undefined' && console.error) {
          const originalError = console.error;
          console.error = function(...args) {
            const message = String(args[0] || '');
            const fullMessage = args.map(String).join(' ');
            // Suppress known browser extension errors
            if (
              message.includes('evmAsk') ||
              message.includes('Cannot redefine property') ||
              fullMessage.includes('ethereum') && fullMessage.includes('Cannot redefine property')
            ) {
              return; // Suppress these errors silently
            }
            originalError.apply(console, args);
          };
        }
        
        // Catch uncaught errors from extensions
        if (typeof window !== 'undefined') {
          window.addEventListener('error', function(e) {
            const message = String(e.message || '');
            const filename = String(e.filename || '');
            // Suppress extension-related errors
            if (
              message.includes('evmAsk') ||
              message.includes('Cannot redefine property: ethereum') ||
              message.includes('Cannot redefine property') && message.includes('ethereum') ||
              filename.includes('evmAsk') ||
              filename.includes('extension://')
            ) {
              e.preventDefault();
              e.stopPropagation();
              return false;
            }
          }, true);
          
          // Also catch unhandled promise rejections from extensions
          window.addEventListener('unhandledrejection', function(e) {
            const message = String(e.reason?.message || e.reason || '');
            if (
              message.includes('evmAsk') ||
              message.includes('ethereum') ||
              message.includes('Cannot redefine property')
            ) {
              e.preventDefault();
              return false;
            }
          });
        }
      })();
    </script>
  </head>
  <body>
    <slot />
  </body>
</html>

<style is:global>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  
  html {
    font-family: 'Sharp Grotesk', system-ui, -apple-system, sans-serif;
  }
  
  body {
    margin: 0;
    padding: 0;
  }
</style>

