---
import Layout from '../layouts/Layout.astro';

const title = 'ANTA Beverly Hills Grand Opening - February 13, 2026';
const description = 'Grand Opening & Ribbon Cutting ceremony at the new ANTA Beverly Hills Flagship. Friday Feb 13, 2026, 10:30 AM – 12 PM. 330 N Beverly Dr, Beverly Hills, CA 90210. RSVP now.';
---

<Layout title={title} description={description}>
  <div class="min-h-screen relative flex flex-col items-center justify-center pt-[80px] md:pt-[50px] px-0 w-full min-w-0 overflow-x-hidden">
    <!-- Background layers matching Figma design -->
    <div aria-hidden="true" class="absolute inset-0 pointer-events-none">
      <!-- Blue base -->
      <div class="fixed bg-[#59c2ff] inset-0"></div>
      
      <!-- Background image layer -->
      <div class="absolute inset-0">
        <img 
          alt="" 
          class="fixed inset-0 w-full h-full object-cover object-top"
          src="/images/home-bg.jpg"
        />
      </div>
      
      <!-- Black overlay (65% opacity) -->
      <div class="fixed inset-0 bg-black opacity-65"></div>
      
    </div>

    <!-- Main content container - symmetric padding per Figma (left/right 20px on mobile) -->
    <div class="relative z-10 flex flex-col gap-[24px] md:gap-[40px] items-center w-full max-w-none px-5 py-0 md:px-5 min-w-0">
      <!-- Top label -->
      <p class="font-sharp-grotesk-book-20 font-bold text-white text-[14px] md:text-[18px] leading-[22px] md:leading-normal not-italic text-center tracking-[14px] md:tracking-[23.4px] uppercase">
        anta beverly hills flagship
      </p>

      <!-- Info section -->
      <div class="flex flex-col gap-[20px] md:gap-[40px] items-center w-full">
        <!-- Logo -->
        <div class="h-[97px] md:h-[103px] w-[180px] md:w-[190px] relative pt-[16px] md:pt-[30px] mb-[20px]">
          <svg class="w-full h-full" width="191" height="103" viewBox="0 0 191 103" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M29.9023 103H20.5L20.9316 97.136H12.1104L9.25293 103H0L22.3936 59.261H31.7637L29.9023 103ZM54.7881 82.6839L61.3174 59.2444H70.8193L58.626 103H49.3564L46.1494 81.2386L40.0859 103H30.8164L43.043 59.2444H51.3164L54.7881 82.6839ZM96.7686 68.6302H88.4121L78.8105 102.999H69.5732L79.1416 68.6302H70.3379L72.9619 59.2444H99.4092L96.7686 68.6302ZM111.105 102.999H101.736L102.151 97.136H93.3633L90.4727 102.999H81.1855L103.63 59.261H112.966L111.105 102.999ZM71.7998 0.00125122C100.123 -0.0526971 128.215 5.09272 154.68 15.1829L167.007 25.6487C149.091 20.9301 130.702 18.2329 112.186 17.6087C143.23 28.8513 170.164 49.1657 189.499 75.8977L190.414 77.1761L171.625 102.99C134.09 50.7354 73.6621 19.7825 9.32031 19.8518C6.64574 19.8518 2.65785 20.0179 0 20.0179L20.9814 5.58231C37.6621 1.84537 54.7057 -0.0263918 71.7998 0.00125122ZM16.0312 88.0491H21.4971L23.1582 72.6009L16.0312 88.0491ZM97.25 88.0491H102.716L104.377 72.5999L97.25 88.0491Z" fill="white"/>
          </svg>
        </div>

        <!-- Main content -->
        <div class="flex flex-col gap-[40px] items-center w-full">
          <!-- FIRST ACCESS heading and description -->
          <div class="flex flex-col gap-[20px] md:gap-[40px] items-center w-full">
                  <div class="flex flex-col gap-[32px] md:gap-[36px] items-center w-full">
                    <!-- FIRST ACCESS heading -->
                    <div class="flex flex-col font-anta justify-center text-center text-white font-normal uppercase w-full max-w-[325px] md:max-w-none">
                      <!-- Mobile: Grand/opening, a, nd RIBBON CUTTING ceremony -->
                      <p class="md:hidden text-7xl leading-[66px]">Grand<br />opening</p>
                      <p class="md:hidden text-4xl leading-10">and RIBBON CUTTING ceremony</p>
                      <!-- Desktop: Grand Opening, and RIBBON CUTTING ceremony -->
                      <p class="hidden md:block text-9xl leading-[110px]">Grand Opening</p>
                      <p class="hidden md:block text-7xl leading-[76px] tracking-wide">and RIBBON CUTTING ceremony</p>
                    </div>
                    
                    <!-- Description text -->
                    <div class="flex flex-col min-h-[121px] items-center justify-center w-full max-w-[1278px]">
                          <p class="font-sharp-grotesk-medium-20 text-white text-2xl font-medium uppercase leading-8 tracking-wide text-center">
                            be among the first to step inside our new <span class="font-sharp-grotesk-book-20">ANTA</span> Beverly Hills Flagship and celebrate as we officially open our doors to the community
                          </p>
                    </div>
                  </div>
                  
                </div>

                <!-- Date/Time card -->
                <div class="bg-[rgba(255,255,255,0.1)] border-2 border-[rgba(255,255,255,0.5)] border-solid flex flex-col md:flex-row items-center justify-center px-0 py-[20px] rounded-[4px] w-full max-w-[854px] gap-0">
                  <div class="flex h-[47px] md:h-[77px] items-center justify-center w-full md:w-[364px]">
                    <div class="flex flex-col font-sharp-grotesk-semibold-25 justify-center text-center text-white text-2xl md:text-4xl font-semibold uppercase leading-5 tracking-wide w-full md:w-[460px]">
                      <p class="whitespace-pre-wrap">FRI 2.13.26</p>
                    </div>
                  </div>
                  <div class="flex h-[47px] md:h-[77px] items-center justify-center w-full md:w-[420px]">
                    <div class="flex flex-col font-sharp-grotesk-semibold-25 justify-center text-center text-white text-2xl md:text-4xl font-semibold uppercase leading-5 tracking-wide whitespace-nowrap">
                      <p>10:30 AM – 12 PM</p>
                    </div>
                  </div>
                </div>
          </div>

          <!-- Form section -->
          <div class="flex flex-col gap-[32px] md:gap-[28px] items-center px-0 pt-[35px] md:pt-[0px] pb-[20px] w-full">
            <!-- Address -->
            <div class="flex flex-col font-sharp-grotesk-semibold-25 justify-center text-center text-white text-2xl font-semibold uppercase leading-7 w-full max-w-[325px] md:max-w-[1226px]">
              <p class="whitespace-pre-wrap">330 n beVERLY dR, bEVERLY hILLS, CA 90210</p>
            </div>

            <!-- Event highlights -->
            <div class="w-full max-w-[948px] p-6 md:p-10 bg-neutral-800/50 rounded-2xl border border-white flex flex-col md:flex-row md:items-center gap-6 md:gap-8">
              <h2 class="font-anta text-white text-[40px] md:text-5xl text-center md:text-left font-normal uppercase leading-[48px] tracking-wide shrink-0">EVENT<br />HIGHLIGHTS</h2>
              <ul class="font-sharp-grotesk-medium-20 text-white text-base font-medium leading-8 tracking-wide list-disc list-outside pl-6 space-y-2 marker:text-white [&_li]:pl-1 md:text-left">
                <li>Ribbon Cutting Promptly at 10:30 AM with Special Guests</li>
                <li>Exclusive First Look Inside the Store</li>
                <li>Sneaker Showcase: KAI 3 Mentally & All-Star Weekend Experiences</li>
                <li>Live DJ, Refreshments & Giveaways (while supplies last)</li>
              </ul>
            </div>

            <!-- Limit reached message (hidden by default; show via JS when API returns limit) -->
            <div
              id="limit-reached-message"
              class="hidden flex flex-col gap-[20px] items-center w-full max-w-[730px] p-6 bg-[rgba(255,255,255,0.1)] border-2 border-[rgba(255,255,255,0.5)] rounded-[4px]"
            >
              <p class="text-white text-[18px] md:text-[22px] font-semibold font-sharp-grotesk-semibold-15 text-center">
                Registration is now closed
              </p>
              <p class="text-white text-[16px] md:text-[18px] font-medium font-sharp-grotesk-medium-20 text-center">
                Thank you for your interest!
              </p>
            </div>

            <form id="registration-form" class="flex flex-col gap-[24px] items-center w-full max-w-[876px]" method="POST">
              <!-- Form title -->
              <p class="text-white text-2xl font-medium font-sharp-grotesk leading-10 text-center w-full">
                Please complete the form below:
              </p>

              <!-- 2x2 fields: equal width and spacing -->
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full min-w-0">
                <input
                  type="text"
                  id="firstName"
                  name="firstName"
                  required
                  autocomplete="given-name"
                  placeholder="First Name"
                  class="min-w-0 h-[48px] px-4 py-3 rounded-[4px] bg-[rgba(255,255,255,0.5)] border border-solid border-white font-sharp-grotesk-book-20 text-[#212121] text-[14px] md:text-[16px] placeholder:text-[#212121] focus:outline-none focus:border-white transition-colors w-full"
                />
                <input
                  type="text"
                  id="lastName"
                  name="lastName"
                  required
                  autocomplete="family-name"
                  placeholder="Last Name"
                  class="min-w-0 h-[48px] px-4 py-3 rounded-[4px] bg-[rgba(255,255,255,0.5)] border border-solid border-white font-sharp-grotesk-book-20 text-[#212121] text-[14px] md:text-[16px] placeholder:text-[#212121] focus:outline-none focus:border-white transition-colors w-full"
                />
                <input
                  type="email"
                  id="email"
                  name="email"
                  required
                  autocomplete="email"
                  placeholder="Email Address"
                  class="min-w-0 h-[48px] px-4 py-3 rounded-[4px] bg-[rgba(255,255,255,0.5)] border border-solid border-white font-sharp-grotesk-book-20 text-[#212121] text-[14px] md:text-[16px] placeholder:text-[#212121] focus:outline-none focus:border-white transition-colors w-full"
                />
                <select
                  id="additionalGuests"
                  name="additionalGuests"
                  required
                  class="min-w-0 h-[48px] px-4 py-3 rounded-[4px] bg-[rgba(255,255,255,0.5)] border border-solid border-white font-sharp-grotesk-book-20 text-[#212121] text-[14px] md:text-[16px] focus:outline-none focus:border-white transition-colors cursor-pointer appearance-none w-full"
                >
                  <option value="" disabled selected class="text-[#212121]">Additional Guests</option>
                  <option value="0" class="text-[#212121]">0</option>
                  <option value="1" class="text-[#212121]">1</option>
                  <option value="2" class="text-[#212121]">2</option>
                  <option value="3" class="text-[#212121]">3</option>
                  <option value="4" class="text-[#212121]">4</option>
                  <option value="5+" class="text-[#212121]">5+</option>
                </select>
              </div>

              <!-- Submit Button / Inline Confirmation Area -->
              <div id="registration-action" class="flex items-center justify-center mt-10" aria-live="polite">
                <button
                  id="register-button"
                  type="submit"
                  class="bg-[#d7000f] border border-solid border-white cursor-pointer px-[24px] py-[16px] md:py-[20px] rounded-[4px] w-full max-w-[294px] h-auto font-sharp-grotesk-semibold-15 text-[24px] md:text-[28px] lg:text-[32px] text-center text-white tracking-[2.4px] md:tracking-[3.2px] uppercase hover:bg-[#b8323d] transition-colors disabled:opacity-60 disabled:cursor-not-allowed"
                >
                  SUBMIT RSVP
                </button>
              </div>


              <!-- Inline error box (hidden by default) -->
              <div
                id="registration-error"
                class="hidden mt-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg text-lg text-center"
                aria-live="polite"
              ></div>
            </form>
            <!-- Footer -->
            <div class="flex items-center justify-center px-0 py-[10px]">
              <p class="font-sharp-grotesk-book-20 font-bold text-[14px] md:text-[18px] leading-[22px] md:leading-normal not-italic text-center text-white tracking-[14px] md:tracking-[23.4px] uppercase whitespace-pre-wrap w-full max-w-[1100px]">
                anta beverly hills flagship
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</Layout>

<script>
  document.getElementById('registration-form')?.addEventListener('submit', async (e) => {
    e.preventDefault();

    const form = e.target as HTMLFormElement;
    const formData = new FormData(form);
    const data = Object.fromEntries(formData.entries());

    const actionContainer = document.getElementById('registration-action');
    const errorContainer = document.getElementById('registration-error');
    const registerButton = document.getElementById('register-button') as HTMLButtonElement;

    // Clear previous error
    if (errorContainer) {
      errorContainer.textContent = '';
      errorContainer.classList.add('hidden');
    }

    // Loading state
    let originalButtonHTML: string | null = null;
    if (registerButton) {
      originalButtonHTML = registerButton.innerHTML;
      registerButton.disabled = true;
      registerButton.classList.add('opacity-60', 'cursor-not-allowed');
      registerButton.setAttribute('aria-busy', 'true');
      registerButton.innerHTML = `
        <span class="inline-flex items-center gap-3">
          <svg class="animate-spin h-6 w-6 text-white" viewBox="0 0 24 24" fill="none">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
          </svg>
          Submitting...
        </span>
      `;
    }

    try {
      const response = await fetch('/api/grand-opening', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });

      if (response.ok) {
        window.location.href = '/success';
      } else {
        const errorData = await response.json().catch(() => ({}));
        console.error('Server error:', errorData);
        
        // Handle limit reached error
        if (errorData.limitReached || response.status === 403) {
          if (errorContainer) {
            errorContainer.textContent = errorData.error || 'Registration is now closed. Thank you for your interest!';
            errorContainer.classList.remove('hidden');
          }
        } else {
          if (errorContainer) {
            errorContainer.textContent = errorData.error || 'Something went wrong. Please try again.';
            errorContainer.classList.remove('hidden');
          }
        }
        
        if (registerButton && originalButtonHTML !== null) {
          registerButton.disabled = false;
          registerButton.classList.remove('opacity-60', 'cursor-not-allowed');
          registerButton.removeAttribute('aria-busy');
          registerButton.innerHTML = originalButtonHTML;
        }
      }
    } catch (error) {
      console.error('Form submission error:', error);
      if (errorContainer) {
        errorContainer.textContent = 'Something went wrong. Please try again.';
        errorContainer.classList.remove('hidden');
      }
      if (registerButton && originalButtonHTML !== null) {
        registerButton.disabled = false;
        registerButton.classList.remove('opacity-60', 'cursor-not-allowed');
        registerButton.removeAttribute('aria-busy');
        registerButton.innerHTML = originalButtonHTML;
      }
    }
  });
</script>

<style>
  /* Custom select arrow styling */
  select {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23212121' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 16px center;
    padding-right: 40px;
  }
</style>
