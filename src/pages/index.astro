---
import Layout from '../layouts/Layout.astro';

const title = 'ANTA BEVERLY HILLS FIRST ACCESS';
---

<Layout title={title}>
  <div class="min-h-screen relative flex flex-col items-center justify-center pt-[80px] md:pt-[50px] px-0 overflow-x-hidden">
    <!-- Background layers matching Figma design -->
    <div aria-hidden="true" class="absolute inset-0 pointer-events-none">
      <!-- Blue base -->
      <div class="fixed bg-[#59c2ff] inset-0"></div>
      
      <!-- Background image layer -->
      <div class="absolute inset-0">
        <img 
          alt="" 
          class="fixed inset-0 w-full h-full object-cover object-top"
          src="/images/home-bg.jpg"
        />
      </div>
      
      <!-- Black overlay (65% opacity) -->
      <div class="fixed inset-0 bg-black opacity-65"></div>
      
    </div>

    <!-- Main content container -->
    <div class="relative z-10 flex flex-col gap-[24px] md:gap-[40px] items-center overflow-clip px-[20px] py-0 w-full max-w-none">
      <!-- Top label -->
      <p class="font-sharp-grotesk-book-20 text-white text-[14px] md:text-[18px] leading-[22px] md:leading-normal not-italic text-center tracking-[14px] md:tracking-[23.4px] uppercase">
        anta beverly hills flagship
      </p>

      <!-- Info section -->
      <div class="flex flex-col gap-[20px] md:gap-[40px] items-center w-full">
        <!-- Logo -->
        <div class="h-[98px] md:h-[103px] w-[179px] md:w-[190px] relative pt-[16px] md:pt-[30px] mb-[20px]">
          <svg width="191" height="103" viewBox="0 0 191 103" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M29.9023 103H20.5L20.9316 97.136H12.1104L9.25293 103H0L22.3936 59.261H31.7637L29.9023 103ZM54.7881 82.6839L61.3174 59.2444H70.8193L58.626 103H49.3564L46.1494 81.2386L40.0859 103H30.8164L43.043 59.2444H51.3164L54.7881 82.6839ZM96.7686 68.6302H88.4121L78.8105 102.999H69.5732L79.1416 68.6302H70.3379L72.9619 59.2444H99.4092L96.7686 68.6302ZM111.105 102.999H101.736L102.151 97.136H93.3633L90.4727 102.999H81.1855L103.63 59.261H112.966L111.105 102.999ZM71.7998 0.00125122C100.123 -0.0526971 128.215 5.09272 154.68 15.1829L167.007 25.6487C149.091 20.9301 130.702 18.2329 112.186 17.6087C143.23 28.8513 170.164 49.1657 189.499 75.8977L190.414 77.1761L171.625 102.99C134.09 50.7354 73.6621 19.7825 9.32031 19.8518C6.64574 19.8518 2.65785 20.0179 0 20.0179L20.9814 5.58231C37.6621 1.84537 54.7057 -0.0263918 71.7998 0.00125122ZM16.0312 88.0491H21.4971L23.1582 72.6009L16.0312 88.0491ZM97.25 88.0491H102.716L104.377 72.5999L97.25 88.0491Z" fill="white"/>
          </svg>
        </div>

        <!-- Main content -->
        <div class="flex flex-col gap-[40px] items-center w-full">
          <!-- FIRST ACCESS heading and description -->
          <div class="flex flex-col gap-[20px] md:gap-[40px] items-center w-full">
                  <div class="flex flex-col gap-[32px] md:gap-[36px] items-center w-full">
                    <!-- FIRST ACCESS heading -->
                    <div class="flex flex-col font-anta justify-center leading-[0] text-[60px] md:text-[80px] lg:text-[100px] xl:text-[140px] text-center text-white uppercase w-[325px] md:w-full">
                      <p class="leading-[44px] md:leading-[70px] lg:leading-[90px] xl:leading-[110px] italic font-bold">FIRST ACCESS</p>
                    </div>
                    
                    <!-- Description text -->
                    <div class="flex flex-col min-h-[121px] items-center justify-center w-full max-w-[1278px]">
                      <div class="flex flex-col font-sharp-grotesk-medium-15 items-center justify-center leading-[0] md:leading-[40px] lg:leading-[56px] not-italic text-white uppercase w-full gap-[10px]">
                        <div class="flex flex-col justify-center text-[24px] md:text-[32px] lg:text-[40px]">
                          <p class="leading-[28px] md:leading-[40px] lg:leading-[56px] tracking-[0.72px] md:tracking-[1.2px]">be among the first to experience</p>
                        </div>
                        <div class="flex flex-col justify-center items-center text-[32px] md:text-[40px] lg:text-[50px]">
                          <p class="leading-[32px] md:leading-[56px] tracking-[0.96px] md:tracking-[2.5px] text-center">
                            <span class="font-sharp-grotesk-book-15">the new </span>
                            <span class="font-sharp-grotesk-bold-15">anta</span>
                            <span class="font-sharp-grotesk-book-15"> beverly hills flagship</span>
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <!-- KAI 3 CNY text -->
                  <div class="flex flex-col gap-[12px] items-center w-full max-w-[1226px] px-[20px]">
                    <div class="flex flex-col font-sharp-grotesk-medium-15 justify-center leading-[0] text-[20px] md:text-[24px] tracking-[0.6px] md:tracking-[0.8px] text-white uppercase text-center">
                      <p class="leading-[28px] md:leading-[32px]">A FIRST LOOK INSIDE THE SPACE,</p>
                    </div>
                    <div class="flex flex-col font-sharp-grotesk-book-15 h-[51px] md:h-auto justify-center leading-[32px] md:leading-[40px] text-[32px] md:text-[40px] tracking-[0.96px] md:tracking-[1.2px] text-white w-full text-center">
                      <p class="mb-0">PLUS THE LAUNCH OF</p>
                      <p>
                        <span>THE </span>
                        <span class="font-sharp-grotesk-semibold-15">KAI 3 CNY</span>
                      </p>
                    </div>
                  </div>
                </div>

                <!-- Date/Time card -->
                <div class="bg-[rgba(255,255,255,0.1)] border-2 border-[rgba(255,255,255,0.5)] border-solid flex flex-col md:flex-row items-center justify-center px-0 py-[20px] rounded-[4px] w-full max-w-[854px] gap-0">
                  <div class="flex h-[47px] md:h-[77px] items-center justify-center w-full md:w-[364px]">
                    <div class="flex flex-col font-sharp-grotesk-semibold-25 justify-center leading-[0] not-italic text-[28px] md:text-[36px] text-center text-white tracking-[0.84px] md:tracking-[1.08px] uppercase w-full md:w-[460px]">
                      <p class="leading-[20px] whitespace-pre-wrap">sat 1.17.26 </p>
                    </div>
                  </div>
                  <div class="flex h-[47px] md:h-[77px] items-center justify-center w-full md:w-[420px]">
                    <div class="flex flex-col font-sharp-grotesk-semibold-25 justify-center leading-[0] not-italic text-[28px] md:text-[36px] text-center text-white tracking-[0.84px] md:tracking-[1.08px] uppercase whitespace-nowrap">
                      <p class="leading-[20px]">10 AM â€“ 2 PM</p>
                    </div>
                  </div>
                </div>
          </div>

          <!-- Form section -->
          <div class="flex flex-col gap-[32px] md:gap-[28px] items-center px-[24px] pt-[35px] md:pt-[40px] pb-[20px] w-full">
            <!-- Address -->
            <div class="flex flex-col font-sharp-grotesk-semibold-25 justify-center leading-[0] not-italic text-[28px] md:text-[24px] lg:text-[32px] text-center text-white uppercase w-[325px] md:w-full max-w-[1226px]">
              <p class="leading-[28px] md:leading-[40px] lg:leading-[56px] whitespace-pre-wrap">330 n beVERLY dR, bEVERLY hILLS, CA 90210</p>
            </div>

            <!-- Form instructions -->
            <div class="flex flex-col justify-center w-full max-w-[730px]">
              <p class="text-white text-[16px] md:text-[20px] font-medium font-sharp-grotesk-medium-20 leading-[24px] md:leading-[32px] whitespace-pre-wrap text-center">Please complete the form below to request first access.</p>
            </div>

            <form id="registration-form" class="flex flex-col gap-[24px] items-center w-full max-w-[876px]" method="POST">
              <!-- Personal Information Fields -->
              <div class="flex flex-col gap-[36px] items-center w-full">
                <!-- Row 1: First Name & Last Name -->
                <div class="flex items-start w-full">
                  <div class="flex flex-[1_0_0] flex-col gap-[12px] items-start w-full">
                    <div class="flex flex-col items-start w-full">
                      <div class="flex flex-col md:flex-row gap-[10px] items-start w-full">
                        <input
                          type="text"
                          id="firstName"
                          name="firstName"
                          required
                          autocomplete="given-name"
                          placeholder="First Name"
                          class="bg-[rgba(255,255,255,0.5)] border border-solid border-white flex flex-[1_0_0] flex-col h-[48px] items-center justify-center px-[16px] py-[12px] rounded-[4px] font-sharp-grotesk-book-20 text-[#212121] text-[14px] md:text-[16px] placeholder:text-[#212121] focus:outline-none focus:border-white transition-colors w-full"
                        />
                        <input
                          type="text"
                          id="lastName"
                          name="lastName"
                          required
                          autocomplete="family-name"
                          placeholder="Last Name"
                          class="bg-[rgba(255,255,255,0.5)] border border-solid border-white flex flex-[1_0_0] flex-col h-[48px] items-center justify-center px-[16px] py-[12px] rounded-[4px] font-sharp-grotesk-book-20 text-[#212121] text-[14px] md:text-[16px] placeholder:text-[#212121] focus:outline-none focus:border-white transition-colors w-full"
                        />
                      </div>
                    </div>
                    
                    <!-- Row 2: Email & Phone -->
                    <div class="flex flex-col items-start w-full">
                      <div class="flex flex-col md:flex-row gap-[10px] items-start w-full">
                        <input
                          type="email"
                          id="email"
                          name="email"
                          required
                          autocomplete="email"
                          placeholder="Email Address"
                          class="bg-[rgba(255,255,255,0.5)] border border-solid border-white flex flex-[1_0_0] flex-col h-[48px] items-center justify-center px-[16px] py-[12px] rounded-[4px] font-sharp-grotesk-book-20 text-[#212121] text-[14px] md:text-[16px] placeholder:text-[#212121] focus:outline-none focus:border-white transition-colors w-full"
                        />
                        <input
                          type="tel"
                          id="phone"
                          name="phone"
                          autocomplete="tel"
                          placeholder="Phone Number"
                          class="bg-[rgba(255,255,255,0.5)] border border-solid border-white flex flex-[1_0_0] flex-col h-[48px] items-center justify-center px-[16px] py-[12px] rounded-[4px] font-sharp-grotesk-book-20 text-[#212121] text-[14px] md:text-[16px] placeholder:text-[#212121] focus:outline-none focus:border-white transition-colors w-full"
                        />
                      </div>
                    </div>
                    
                    <!-- Row 3: Shirt Size & Sneaker Size -->
                    <div class="flex flex-col items-start w-full">
                      <div class="flex flex-col md:flex-row gap-[10px] items-start w-full">
                        <select
                          id="shirtSize"
                          name="shirtSize"
                          class="bg-[rgba(255,255,255,0.5)] border border-solid border-white flex flex-[1_0_0] flex-col h-[48px] items-center justify-center px-[16px] py-[12px] rounded-[4px] font-sharp-grotesk-book-20 text-[#212121] text-[14px] md:text-[16px] focus:outline-none focus:border-white transition-colors cursor-pointer appearance-none w-full"
                        >
                          <option value="" class="text-[#212121]">Shirt Size</option>
                          <option value="XS" class="text-[#212121]">XS</option>
                          <option value="S" class="text-[#212121]">S</option>
                          <option value="M" class="text-[#212121]">M</option>
                          <option value="L" class="text-[#212121]">L</option>
                          <option value="XL" class="text-[#212121]">XL</option>
                          <option value="XXL" class="text-[#212121]">XXL</option>
                        </select>
                        <select
                          id="sneakerSize"
                          name="sneakerSize"
                          class="bg-[rgba(255,255,255,0.5)] border border-solid border-white flex flex-[1_0_0] flex-col h-[48px] items-center justify-center px-[16px] py-[12px] rounded-[4px] font-sharp-grotesk-book-20 text-[#212121] text-[14px] md:text-[16px] focus:outline-none focus:border-white transition-colors cursor-pointer appearance-none w-full"
                        >
                          <option value="" class="text-[#212121]">Sneaker Size</option>
                          <option value="5" class="text-[#212121]">5</option>
                          <option value="5.5" class="text-[#212121]">5.5</option>
                          <option value="6" class="text-[#212121]">6</option>
                          <option value="6.5" class="text-[#212121]">6.5</option>
                          <option value="7" class="text-[#212121]">7</option>
                          <option value="7.5" class="text-[#212121]">7.5</option>
                          <option value="8" class="text-[#212121]">8</option>
                          <option value="8.5" class="text-[#212121]">8.5</option>
                          <option value="9" class="text-[#212121]">9</option>
                          <option value="9.5" class="text-[#212121]">9.5</option>
                          <option value="10" class="text-[#212121]">10</option>
                          <option value="10.5" class="text-[#212121]">10.5</option>
                          <option value="11" class="text-[#212121]">11</option>
                          <option value="11.5" class="text-[#212121]">11.5</option>
                          <option value="12" class="text-[#212121]">12</option>
                          <option value="12.5" class="text-[#212121]">12.5</option>
                          <option value="13" class="text-[#212121]">13</option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Creator/Media section header -->
                <div class="flex flex-col font-sharp-grotesk-medium-20 justify-center leading-[0] not-italic text-center text-white w-full max-w-[730px] whitespace-pre-wrap gap-[10px]">
                  <p class="mb-0 text-[20px] leading-[28px]">Are you creator? Are you with media?</p>
                  <p class="font-sharp-grotesk-book-20 text-[16px] leading-[32px]">If so, please enter your details below:</p>
                </div>

                <!-- Creator/Media fields -->
                <div class="flex flex-col gap-[12px] items-start w-full">
                  <div class="flex flex-col items-start w-full">
                    <div class="flex flex-col md:flex-row gap-[10px] items-start w-full">
                      <input
                        type="email"
                        id="creatorEmail"
                        name="creatorEmail"
                        autocomplete="email"
                        placeholder="Email Address"
                        class="bg-[rgba(255,255,255,0.5)] border border-solid border-white flex flex-[1_0_0] flex-col h-[48px] items-center justify-center px-[16px] py-[12px] rounded-[4px] font-sharp-grotesk-book-20 text-[#212121] text-[14px] md:text-[16px] placeholder:text-[#212121] focus:outline-none focus:border-white transition-colors w-full"
                      />
                      <input
                        type="text"
                        id="media"
                        name="media"
                        placeholder="Media you work with"
                        class="bg-[rgba(255,255,255,0.5)] border border-solid border-white flex flex-[1_0_0] flex-col h-[48px] items-center justify-center px-[16px] py-[12px] rounded-[4px] font-sharp-grotesk-book-20 text-[#212121] text-[14px] md:text-[16px] placeholder:text-[#212121] focus:outline-none focus:border-white transition-colors w-full"
                      />
                    </div>
                  </div>
                  
                  <!-- Instagram Profile -->
                  <div class="flex items-start w-full">
                    <input
                      type="text"
                      id="instagramProfile"
                      name="instagramProfile"
                      placeholder="Instagram Profile"
                      class="bg-[rgba(255,255,255,0.5)] border border-solid border-white flex flex-[1_0_0] flex-col h-[48px] items-center justify-center px-[16px] py-[12px] rounded-[4px] font-sharp-grotesk-book-20 text-[#212121] text-[14px] md:text-[16px] placeholder:text-[#212121] focus:outline-none focus:border-white transition-colors w-full"
                    />
                  </div>
                </div>
              </div>

              <!-- Submit Button / Inline Confirmation Area -->
              <div id="registration-action" class="flex items-center justify-center" aria-live="polite">
                <button
                  id="register-button"
                  type="submit"
                  class="bg-[#d7000f] border border-solid border-white cursor-pointer px-[24px] py-[16px] md:py-[20px] rounded-[4px] w-[294px] h-auto font-sharp-grotesk-semibold-15 text-[24px] md:text-[28px] lg:text-[32px] text-center text-white tracking-[2.4px] md:tracking-[3.2px] uppercase hover:bg-[#b8323d] transition-colors disabled:opacity-60 disabled:cursor-not-allowed"
                >
                  SUBMIT RSVP
                </button>
              </div>

              <!-- Disclaimer -->
              <div class="flex flex-col gap-[40px] items-center">
                <div class="flex flex-col font-sharp-grotesk-book-20 justify-center leading-[0] not-italic text-[14px] md:text-[16px] text-center text-white tracking-[0.7px] md:tracking-[0.8px] w-full max-w-[730px]">
                  <p class="leading-[24px] md:leading-[32px] whitespace-pre-wrap" style="text-shadow: 0px 4px 4px rgba(0,0,0,0.25);">*LIMITED FIRST ACCESS, GIFTED ITEMS AVAILABLE WHILE SUPPLIES LAST.</p>
                </div>
              </div>

              <!-- Inline error box (hidden by default) -->
              <div
                id="registration-error"
                class="hidden mt-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg text-lg text-center"
                aria-live="polite"
              ></div>
            </form>
            <!-- Footer -->
            <div class="flex items-center justify-center px-0 py-[10px]">
              <p class="font-sharp-grotesk-book-20 text-[14px] md:text-[18px] leading-[22px] md:leading-normal not-italic text-center text-white tracking-[14px] md:tracking-[23.4px] uppercase whitespace-pre-wrap w-full max-w-[1100px]">
                anta beverly hills flagship
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</Layout>

<script>
  document.getElementById('registration-form')?.addEventListener('submit', async (e) => {
    e.preventDefault();

    const form = e.target as HTMLFormElement;
    const formData = new FormData(form);
    const data = Object.fromEntries(formData.entries());

    const actionContainer = document.getElementById('registration-action');
    const errorContainer = document.getElementById('registration-error');
    const registerButton = document.getElementById('register-button') as HTMLButtonElement;

    // Clear previous error
    if (errorContainer) {
      errorContainer.textContent = '';
      errorContainer.classList.add('hidden');
    }

    // Loading state
    let originalButtonHTML: string | null = null;
    if (registerButton) {
      originalButtonHTML = registerButton.innerHTML;
      registerButton.disabled = true;
      registerButton.classList.add('opacity-60', 'cursor-not-allowed');
      registerButton.setAttribute('aria-busy', 'true');
      registerButton.innerHTML = `
        <span class="inline-flex items-center gap-3">
          <svg class="animate-spin h-6 w-6 text-white" viewBox="0 0 24 24" fill="none">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
          </svg>
          Submitting...
        </span>
      `;
    }

    try {
      const response = await fetch('/api/signup', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });

      if (response.ok) {
        if (actionContainer) {
          actionContainer.setAttribute('aria-live', 'polite');
          actionContainer.innerHTML = `
            <div class="inline-block mt-2 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg text-[20px] font-semibold">
              ðŸŽ‰ You're in! We'll be in touch soon with details about the run.
            </div>
          `;
        }
        form.reset();
      } else {
        const errorData = await response.json().catch(() => ({}));
        console.error('Server error:', errorData);
        if (errorContainer) {
          errorContainer.textContent = 'Something went wrong. Please try again.';
          errorContainer.classList.remove('hidden');
        }
        if (registerButton && originalButtonHTML !== null) {
          registerButton.disabled = false;
          registerButton.classList.remove('opacity-60', 'cursor-not-allowed');
          registerButton.removeAttribute('aria-busy');
          registerButton.innerHTML = originalButtonHTML;
        }
      }
    } catch (error) {
      console.error('Form submission error:', error);
      if (errorContainer) {
        errorContainer.textContent = 'Something went wrong. Please try again.';
        errorContainer.classList.remove('hidden');
      }
      if (registerButton && originalButtonHTML !== null) {
        registerButton.disabled = false;
        registerButton.classList.remove('opacity-60', 'cursor-not-allowed');
        registerButton.removeAttribute('aria-busy');
        registerButton.innerHTML = originalButtonHTML;
      }
    }
  });
</script>

<style>
  /* Custom select arrow styling */
  select {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23212121' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 16px center;
    padding-right: 40px;
  }
</style>
